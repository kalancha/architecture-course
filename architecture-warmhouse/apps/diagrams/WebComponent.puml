@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title Component Diagram - Web Application (SPA)

Container(core_api, "Core Service API", "Backend", "REST endpoints")

Container_Boundary(web, "Web Application (React/Vue)") {

    ' Routing & Views
    Component(router, "Router", "Library", "Управление навигацией")
    Component(view_dashboard, "Dashboard Page", "View Component", "Отображает виджеты и графики")
    Component(view_settings, "Settings Page", "View Component", "Формы настройки устройств")

    ' State Management (Redux/Pinia/MobX)
    Component(store_devices, "Device Store", "State Manager", "Хранит список устройств и их текущие статусы в памяти браузера")
    Component(store_auth, "Auth Store", "State Manager", "Хранит токен пользователя")

    ' API Clients
    Component(api_client, "HTTP Client", "Axios/Fetch", "Настроенный клиент (Interceptors, Headers)")
    Component(ws_client, "WebSocket Client", "Socket.io/Native", "Слушает обновления в реальном времени чтобы не делать F5")

}

' User Flow
Rel(router, view_dashboard, "Renders")
Rel(router, view_settings, "Renders")

' State connections
Rel(view_dashboard, store_devices, "Subscribes to updates")
Rel(view_settings, store_devices, "Dispatches actions")
Rel(view_dashboard, store_auth, "Checks login")

' Network
Rel(store_devices, api_client, "Load Initial State")
Rel(store_devices, ws_client, "Receive Live Updates")

Rel(api_client, core_api, "HTTPS JSON")
Rel(ws_client, core_api, "WSS Events")

@enduml
