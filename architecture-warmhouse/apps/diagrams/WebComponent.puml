@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title Component Diagram - Web Application

Person(user, "Пользователь", "Владелец")
Container(core_api, "Core Service API", "Backend", "REST endpoints")

Container_Boundary(web, "Web Application (React)") {

    Component(router, "Router", "Library", "Управление навигацией")

    Container_Boundary(views, "Views") {
        Component(view_dashboard, "Main Page", "View Component", "Отображает комнаты и устройства")
        Component(view_settings, "Settings Page", "View Component", "Настройки пользователя: дома, комнаты, устройства")
        Component(view_devices, "Devices Page", "View Component", "Управление устройствами и автоматическими сценариями")
    }

    Component(redux_actions, "Redux Async Actions", "Redux Thunk", "Асинхронные действия для Redux")
    Component(store, "Store", "State Manager", "Хранит данные из бекенда")

    Component(api_client, "HTTP Client", "Axios/Fetch", "Клиент для запросов к бекенду")
    Component(ws_client, "WebSocket Client", "Socket.io/Native", "Слушает обновления в реальном времени чтобы не делать F5")

}

Rel(user, router, "Взаимодействие с системой")

Rel(router, views, "Renders")
Rel(views, store, "Получение данных")

Rel(views, ws_client, "Создание подписки на события от бекенда")
Rel(views, redux_actions, "Dispatch событий")

Rel(redux_actions, api_client, "Запросы к бекенду")
Rel(redux_actions, store, "Обновление данных в store")
Rel(ws_client, store, "Обновление данных в store")

Rel(api_client, core_api, "API calls [REST]")
Rel(ws_client, core_api, "WSS Events [WebSocket]")

@enduml
